
{% extends "base.html" %}
{% block title %}Shop - semblnyce{% endblock %}
{% block content %}
<h1 style="text-align: center; margin-bottom: 40px;">STREET GEAR</h1>

<div class="product-grid">
    {% for product in products %}
    <div class="product-card" onclick="window.location.href='/product/{{ product.id }}'">
        <div class="product-image-container">
            <div class="product-image" data-images="{{ product.images|join(',') }}">
                {% if product.images[0].endswith(('.jpg', '.jpeg', '.png', '.gif', '.webp')) %}
                <img src="{{ url_for('static', filename=product.images[0]) }}" alt="{{ product.name }}" class="main-image">
                {% else %}
                <span class="main-image">{{ product.images[0] }}</span>
                {% endif %}
                <div class="product-price-overlay">${{ product.price }}</div>
            </div>
            {% if product.images|length > 1 %}
            <div class="image-dots">
                {% for image in product.images %}
                <span class="dot {% if loop.index0 == 0 %}active{% endif %}" 
                      data-index="{{ loop.index0 }}" 
                      data-image="{{ image }}"></span>
                {% endfor %}
            </div>
            {% endif %}
        </div>
        <div class="product-details">
            <h3>{{ product.name }}</h3>
        </div>
    </div>
    {% endfor %}
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const productCards = document.querySelectorAll('.product-card');
    
    productCards.forEach(card => {
        const dots = card.querySelectorAll('.dot');
        const mainImage = card.querySelector('.main-image');
        
        dots.forEach(dot => {
            dot.addEventListener('click', function(e) {
                e.stopPropagation(); // Prevent card click
                
                // Remove active class from all dots
                dots.forEach(d => d.classList.remove('active'));
                
                // Add active class to clicked dot
                this.classList.add('active');
                
                // Update main image
                const imageFile = this.dataset.image;
                if (imageFile.endsWith('.jpg') || imageFile.endsWith('.jpeg') || imageFile.endsWith('.png') || imageFile.endsWith('.gif') || imageFile.endsWith('.webp')) {
                    mainImage.innerHTML = `<img src="/static/${imageFile}" alt="Product image" class="main-image">`;
                } else {
                    mainImage.textContent = imageFile;
                }
            });
        });
    });
});
</script>
{% endblock %}
